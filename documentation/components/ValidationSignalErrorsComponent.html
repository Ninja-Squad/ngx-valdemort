<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ngx-valdemort documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">ngx-valdemort documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Components</li>
  <li class="breadcrumb-item"
  >
  ValidationSignalErrorsComponent</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" class="nav-link"
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
        <li class="nav-item">
            <a href="#templateData" class="nav-link"
                role="tab" id="templateData-tab" data-bs-toggle="tab" data-link="template">Template</a>
        </li>
        <li class="nav-item">
            <a href="#tree" class="nav-link"
                role="tab" id="tree-tab" data-bs-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/lib/validation-signal-errors.component.ts</code>
</p>


    <p class="comment">
        <h3>Description</h3>
    </p>
    <p class="comment">
        <p><strong>Experimental</strong></p>
<p>Component allowing to display validation error messages associated to a given field of a signal form.
The control is provided using the <code>formField</code> input of the component.</p>
<p>Example usage:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">  &lt;val-signal-errors [formField]=&quot;form.birthYear&quot;&gt;
    &lt;ng-template valError=&quot;required&quot;&gt;The birth year is mandatory&lt;/ng-template&gt;
    &lt;ng-template valError=&quot;max&quot; let-error=&quot;error&quot;&gt;The max value for the birth year is {{ error.max | number }}&lt;/ng-template&gt;
  &lt;/val-errors&gt;</code></pre></div><p>This component, if the control is invalid, displays its validation errors using the provided templates.
The templates, as shown in the above example, have access to the validation error itself.</p>
<p>The label of the control can also be provided as input, and then used in the templates:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">  &lt;val-signal-errors [formField]=&quot;form.birthYear&quot; label=&quot;the birth year&quot;&gt;
    &lt;ng-template valError=&quot;required&quot; let-label&gt;{{ label }} is mandatory&lt;/ng-template&gt;
    &lt;ng-template valError=&quot;max&quot; let-error=&quot;error&quot; let-label&gt;The max value for {{ label }} is {{ error.max | number }}&lt;/ng-template&gt;
  &lt;/val-signal-errors&gt;</code></pre></div><p>The component‘s behavior is configured globally by the Config service (see its documentation for more details). It can</p>
<ul>
<li>display the first error, or all the errors</li>
<li>add CSS classes to its host <code>&lt;val-errors&gt;</code> element</li>
<li>add CSS classes to each error message element being displayed</li>
<li>choose when to display the errors (dirty, touched, etc.)</li>
</ul>
<p>Global, default templates can be defined (and used by this component) using the default validation errors directive
(see its documentation for details). So, if the default error messages are defined and sufficient for a given control, all you
need is</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">&lt;val-signal-errors [formField]=&quot;form.birthYear&quot; /&gt;</code></pre></div><p>or, if the default templates expect a label:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">&lt;val-signal-errors [formField]=&quot;form.birthYear&quot; label=&quot;the birth year&quot; /&gt;</code></pre></div><p>If, however, you want to override one or several error messages by custom ones, you can do so by simply defining them inside the
component:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">&lt;val-signal-errors [formField]=&quot;form.birthYear&quot; label=&quot;the birth year&quot;&gt;
  &lt;ng-template valError=&quot;max&quot;&gt;You&#39;re too young, sorry&lt;/ng-template&gt;
&lt;/val-signal-errors&gt;</code></pre></div><p>A fallback template can also be provided. This fallback template is used for all the errors that exist on the form control
but are not handled by any of the specific error templates:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-none">&lt;val-signal-errors [formField]=&quot;form.birthYear&quot; label=&quot;the birth year&quot;&gt;
  &lt;ng-template valError=&quot;max&quot;&gt;You&#39;re too young, sorry&lt;/ng-template&gt;
  &lt;ng-template valFallback let-label let-type=&quot;type&quot; let-error=&quot;error&quot;&gt;{{ label }} has an unhandled error of kind {{ type }}: {{ error | json }}&lt;/ng-template&gt;
&lt;/val-signal-errors&gt;</code></pre></div><p>Note that, the fallback template can also be defined in the default validation errors directive (see its documentation for details).
If a fallback template is defined inside <code>val-signal-errors</code>, it overrides the default fallback.</p>
<p>If an error is present on the field, but doesn&#39;t have any template, default template or fallback template defined for its type,
then it&#39;s not displayed. If the field is valid, or if none of the errors of the component has a matching template or default template,
then this component itself is hidden.</p>

    </p>




<section data-compodoc="block-metadata">
    <h3>Metadata</h3>
    <table class="table table-sm table-hover metadata">
        <tbody>

            <tr>
                <td class="col-md-3">changeDetection</td>
                <td class="col-md-9"><code>ChangeDetectionStrategy.OnPush</code></td>
            </tr>





            <tr>
                <td class="col-md-3">host</td>
                <td class="col-md-9"><code>{<br>}</code></td>
            </tr>






            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>val-signal-errors</code></td>
            </tr>


            <tr>
                <td class="col-md-3">imports</td>
                <td class="col-md-9">
                                <code><a href="https://angular.io/api/common/NgTemplateOutlet" target="_blank" >NgTemplateOutlet</a></code>
                </td>
            </tr>




            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./validation-signal-errors.component.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#errorClasses" >errorClasses</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#errorDirectives" >errorDirectives</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#errorsClasses" >errorsClasses</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#fallbackDirective" >fallbackDirective</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#vm" >vm</a>
                            </li>
                        </ul>
                    </td>
                </tr>


                <tr>
                    <td class="col-md-4">
                        <h6><b>Inputs</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#formField" >formField</a>
                            </li>
                            <li>
                                <a href="#label" >label</a>
                            </li>
                        </ul>
                    </td>
                </tr>




        </tbody>
    </table>
</section>


    <section data-compodoc="block-inputs">
    <h3 id="inputs">Inputs</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="formField"></a>
                        <b>formField</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>FieldTree&lt;unknown&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Required : </i>&nbsp;<b>true</b>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="121" class="link-to-prism">src/lib/validation-signal-errors.component.ts:121</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The FieldTree containing the validation errors.</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="label"></a>
                        <b>label</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>string | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="126" class="link-to-prism">src/lib/validation-signal-errors.component.ts:126</a></div>
                            </td>
                        </tr>
                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>The label of the field, exposed to templates so they can use it in the error message.</p>
</div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>




    <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="errorClasses"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>errorClasses</b></span>
                        <a href="#errorClasses"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.config.errorClasses || &#x27;&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="143" class="link-to-prism">src/lib/validation-signal-errors.component.ts:143</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="errorDirectives"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>errorDirectives</b></span>
                        <a href="#errorDirectives"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>contentChildren(ValidationErrorDirective)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="131" class="link-to-prism">src/lib/validation-signal-errors.component.ts:131</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>The list of validation error directives (i.e. <ng-template valError="...">) contained inside the component element.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="errorsClasses"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>errorsClasses</b></span>
                        <a href="#errorsClasses"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.config.errorsClasses || &#x27;&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="142" class="link-to-prism">src/lib/validation-signal-errors.component.ts:142</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fallbackDirective"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>fallbackDirective</b></span>
                        <a href="#fallbackDirective"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>contentChild(ValidationFallbackDirective)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="136" class="link-to-prism">src/lib/validation-signal-errors.component.ts:136</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>The validation fallback directive (i.e. <ng-template valFallback>) contained inside the component element.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="vm"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>vm</b></span>
                        <a href="#vm"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Signal&lt;ViewModel&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; {
    if (this.shouldDisplayErrors()) {
      const errorsToDisplay &#x3D; this.findErrorsToDisplay();
      return {
        shouldDisplayErrors: true,
        errorsToDisplay
      };
    } else {
      return NO_ERRORS;
    }
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="175" class="link-to-prism">src/lib/validation-signal-errors.component.ts:175</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { ChangeDetectionStrategy, Component, computed, contentChild, contentChildren, inject, input, Signal } from &#x27;@angular/core&#x27;;
import { DisplayMode, ValdemortConfig } from &#x27;./valdemort-config.service&#x27;;
import { DefaultValidationErrors } from &#x27;./default-validation-errors.service&#x27;;
import { ValidationErrorDirective } from &#x27;./validation-error.directive&#x27;;
import { ValidationFallbackDirective } from &#x27;./validation-fallback.directive&#x27;;
import { NgTemplateOutlet } from &#x27;@angular/common&#x27;;
import { FieldTree, ValidationError } from &#x27;@angular/forms/signals&#x27;;

interface ErrorWithDirective {
  error: ValidationError.WithField;
  directive: ValidationErrorDirective;
}

interface ErrorsToDisplay {
  // The validation error directives to display
  errors: Array&lt;ErrorWithDirective&gt;;

  // The fallback directive to use to display the fallback errors
  fallback: ValidationFallbackDirective | undefined;

  // the fallback errors to display (empty if there is no fallback directive)
  fallbackErrors: Array&lt;ValidationError.WithField&gt;;
}

type ViewModel &#x3D;
  | {
      shouldDisplayErrors: false;
    }
  | {
      shouldDisplayErrors: true;
      errorsToDisplay: ErrorsToDisplay;
    };

const NO_ERRORS: ViewModel &#x3D; {
  shouldDisplayErrors: false
};

/**
 * **Experimental**
 *
 * Component allowing to display validation error messages associated to a given field of a signal form.
 * The control is provided using the &#x60;formField&#x60; input of the component.
 *
 * Example usage:
 * &#x60;&#x60;&#x60;
 *   &lt;val-signal-errors [formField]&#x3D;&quot;form.birthYear&quot;&gt;
 *     &lt;ng-template valError&#x3D;&quot;required&quot;&gt;The birth year is mandatory&lt;/ng-template&gt;
 *     &lt;ng-template valError&#x3D;&quot;max&quot; let-error&#x3D;&quot;error&quot;&gt;The max value for the birth year is {{ error.max | number }}&lt;/ng-template&gt;
 *   &lt;/val-errors&gt;
 * &#x60;&#x60;&#x60;
 *
 * This component, if the control is invalid, displays its validation errors using the provided templates.
 * The templates, as shown in the above example, have access to the validation error itself.
 *
 * The label of the control can also be provided as input, and then used in the templates:
 * &#x60;&#x60;&#x60;
 *   &lt;val-signal-errors [formField]&#x3D;&quot;form.birthYear&quot; label&#x3D;&quot;the birth year&quot;&gt;
 *     &lt;ng-template valError&#x3D;&quot;required&quot; let-label&gt;{{ label }} is mandatory&lt;/ng-template&gt;
 *     &lt;ng-template valError&#x3D;&quot;max&quot; let-error&#x3D;&quot;error&quot; let-label&gt;The max value for {{ label }} is {{ error.max | number }}&lt;/ng-template&gt;
 *   &lt;/val-signal-errors&gt;
 * &#x60;&#x60;&#x60;
 *
 * The component‘s behavior is configured globally by the Config service (see its documentation for more details). It can
 * - display the first error, or all the errors
 * - add CSS classes to its host &#x60;&lt;val-errors&gt;&#x60; element
 * - add CSS classes to each error message element being displayed
 * - choose when to display the errors (dirty, touched, etc.)
 *
 * Global, default templates can be defined (and used by this component) using the default validation errors directive
 * (see its documentation for details). So, if the default error messages are defined and sufficient for a given control, all you
 * need is
 *
 * &#x60;&#x60;&#x60;
 * &lt;val-signal-errors [formField]&#x3D;&quot;form.birthYear&quot; /&gt;
 * &#x60;&#x60;&#x60;
 *
 * or, if the default templates expect a label:
 *
 * &#x60;&#x60;&#x60;
 * &lt;val-signal-errors [formField]&#x3D;&quot;form.birthYear&quot; label&#x3D;&quot;the birth year&quot; /&gt;
 * &#x60;&#x60;&#x60;
 *
 * If, however, you want to override one or several error messages by custom ones, you can do so by simply defining them inside the
 * component:
 *
 * &#x60;&#x60;&#x60;
 * &lt;val-signal-errors [formField]&#x3D;&quot;form.birthYear&quot; label&#x3D;&quot;the birth year&quot;&gt;
 *   &lt;ng-template valError&#x3D;&quot;max&quot;&gt;You&#x27;re too young, sorry&lt;/ng-template&gt;
 * &lt;/val-signal-errors&gt;
 * &#x60;&#x60;&#x60;
 *
 * A fallback template can also be provided. This fallback template is used for all the errors that exist on the form control
 * but are not handled by any of the specific error templates:
 * &#x60;&#x60;&#x60;
 * &lt;val-signal-errors [formField]&#x3D;&quot;form.birthYear&quot; label&#x3D;&quot;the birth year&quot;&gt;
 *   &lt;ng-template valError&#x3D;&quot;max&quot;&gt;You&#x27;re too young, sorry&lt;/ng-template&gt;
 *   &lt;ng-template valFallback let-label let-type&#x3D;&quot;type&quot; let-error&#x3D;&quot;error&quot;&gt;{{ label }} has an unhandled error of kind {{ type }}: {{ error | json }}&lt;/ng-template&gt;
 * &lt;/val-signal-errors&gt;
 * &#x60;&#x60;&#x60;
 * Note that, the fallback template can also be defined in the default validation errors directive (see its documentation for details).
 * If a fallback template is defined inside &#x60;val-signal-errors&#x60;, it overrides the default fallback.
 *
 * If an error is present on the field, but doesn&#x27;t have any template, default template or fallback template defined for its type,
 * then it&#x27;s not displayed. If the field is valid, or if none of the errors of the component has a matching template or default template,
 * then this component itself is hidden.
 */
@Component({
  selector: &#x27;val-signal-errors&#x27;,
  templateUrl: &#x27;./validation-signal-errors.component.html&#x27;,
  host: {
    &#x27;[class]&#x27;: &#x27;errorsClasses&#x27;,
    &#x27;[style.display]&#x27;: &#x60;vm().shouldDisplayErrors ? &#x27;&#x27; : &#x27;none&#x27;&#x60;
  },
  imports: [NgTemplateOutlet],
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class ValidationSignalErrorsComponent {
  /**
   * The FieldTree containing the validation errors.
   */
  readonly formField &#x3D; input.required&lt;FieldTree&lt;unknown&gt;&gt;();

  /**
   * The label of the field, exposed to templates so they can use it in the error message.
   */
  readonly label &#x3D; input&lt;string | null&gt;(null);

  /**
   * The list of validation error directives (i.e. &lt;ng-template valError&#x3D;&quot;...&quot;&gt;) contained inside the component element.
   */
  readonly errorDirectives &#x3D; contentChildren(ValidationErrorDirective);

  /**
   * The validation fallback directive (i.e. &lt;ng-template valFallback&gt;) contained inside the component element.
   */
  readonly fallbackDirective &#x3D; contentChild(ValidationFallbackDirective);

  /**
   * The Config service instance, defining the behavior of this component
   */
  private readonly config &#x3D; inject(ValdemortConfig);
  readonly errorsClasses &#x3D; this.config.errorsClasses || &#x27;&#x27;;
  readonly errorClasses &#x3D; this.config.errorClasses || &#x27;&#x27;;

  /**
   * The DefaultValidationErrors service instance, holding the default error templates,
   * optionally defined by using the default validation errors directive
   */
  private readonly defaultValidationErrors &#x3D; inject(DefaultValidationErrors);

  private readonly hasDisplayableError &#x3D; computed&lt;boolean&gt;(() &#x3D;&gt; {
    const field &#x3D; this.formField();
    const errors &#x3D; field().errors();
    return (
      errors.length &gt; 0 &amp;&amp;
      (!!this.fallbackDirective() ||
        !!this.defaultValidationErrors.fallback() ||
        errors.some(
          error &#x3D;&gt;
            this.defaultValidationErrors.directives().some(dir &#x3D;&gt; dir.type() &#x3D;&#x3D;&#x3D; error.kind) ||
            this.errorDirectives().some(dir &#x3D;&gt; dir.type() &#x3D;&#x3D;&#x3D; error.kind)
        ))
    );
  });

  private readonly shouldDisplayErrors &#x3D; computed&lt;boolean&gt;(() &#x3D;&gt; {
    const field &#x3D; this.formField();
    const fieldState &#x3D; field();
    if (!fieldState.invalid() || !this.hasDisplayableError()) {
      return false;
    }
    return this.config.shouldDisplayFieldErrors(fieldState);
  });

  readonly vm: Signal&lt;ViewModel&gt; &#x3D; computed(() &#x3D;&gt; {
    if (this.shouldDisplayErrors()) {
      const errorsToDisplay &#x3D; this.findErrorsToDisplay();
      return {
        shouldDisplayErrors: true,
        errorsToDisplay
      };
    } else {
      return NO_ERRORS;
    }
  });

  private findErrorsToDisplay(): ErrorsToDisplay {
    const field &#x3D; this.formField();
    const fieldErrors &#x3D; field().errors();
    const mergedErrors: Array&lt;ErrorWithDirective&gt; &#x3D; [];
    const fallbackErrors: Array&lt;ValidationError.WithField&gt; &#x3D; [];
    const alreadyMetTypes &#x3D; new Set&lt;string&gt;();
    const shouldContinue &#x3D; () &#x3D;&gt; this.config.displayMode &#x3D;&#x3D;&#x3D; DisplayMode.ALL || (mergedErrors.length &#x3D;&#x3D;&#x3D; 0 &amp;&amp; fallbackErrors.length &#x3D;&#x3D;&#x3D; 0);
    const defaultValidationErrorDirectives &#x3D; this.defaultValidationErrors.directives();
    for (let i &#x3D; 0; i &lt; defaultValidationErrorDirectives.length &amp;&amp; shouldContinue(); i++) {
      const defaultDirective &#x3D; defaultValidationErrorDirectives[i];
      const error &#x3D; fieldErrors.find(error &#x3D;&gt; error.kind &#x3D;&#x3D;&#x3D; defaultDirective.type());
      if (error) {
        const customDirectiveOfSameType &#x3D; this.errorDirectives().find(dir &#x3D;&gt; dir.type() &#x3D;&#x3D;&#x3D; defaultDirective.type());
        mergedErrors.push({ directive: customDirectiveOfSameType ?? defaultDirective, error });
      }
      alreadyMetTypes.add(defaultDirective.type());
    }

    if (shouldContinue()) {
      const customDirectives &#x3D; this.errorDirectives();
      for (let i &#x3D; 0; i &lt; customDirectives.length &amp;&amp; shouldContinue(); i++) {
        const customDirective &#x3D; customDirectives[i];
        if (!alreadyMetTypes.has(customDirective.type())) {
          const error &#x3D; fieldErrors.find(error &#x3D;&gt; error.kind &#x3D;&#x3D;&#x3D; customDirective.type());
          if (error) {
            mergedErrors.push({ directive: customDirective, error });
          }
        }
        alreadyMetTypes.add(customDirective.type());
      }
    }

    if (shouldContinue() &amp;&amp; (this.fallbackDirective() || this.defaultValidationErrors.fallback())) {
      for (let i &#x3D; 0; i &lt; fieldErrors.length &amp;&amp; shouldContinue(); i++) {
        const error &#x3D; fieldErrors[i];
        if (!alreadyMetTypes.has(error.kind)) {
          fallbackErrors.push(error);
        }
      }
    }

    return {
      errors: mergedErrors,
      fallback: this.fallbackDirective() ?? this.defaultValidationErrors.fallback(),
      fallbackErrors
    };
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="templateData">
        <pre class="line-numbers"><code class="language-html">@let vm &#x3D; this.vm();
@if (vm.shouldDisplayErrors) {
  @for (errorWithDirective of vm.errorsToDisplay.errors; track $index) {
    &lt;div [class]&#x3D;&quot;errorClasses&quot;&gt;
      &lt;ng-container
        *ngTemplateOutlet&#x3D;&quot;
          errorWithDirective.directive.templateRef;
          context: {
            $implicit: label(),
            error: errorWithDirective.error
          }
        &quot;
      /&gt;
    &lt;/div&gt;
  }
  @for (error of vm.errorsToDisplay.fallbackErrors; track $index) {
    &lt;div [class]&#x3D;&quot;errorClasses&quot;&gt;
      &lt;ng-container
        *ngTemplateOutlet&#x3D;&quot;
          vm.errorsToDisplay.fallback!.templateRef;
          context: {
            $implicit: label(),
            type: error.kind,
            error: error
          }
        &quot;
      /&gt;
    &lt;/div&gt;
  }
}
</code></pre>
    </div>


    <div class="tab-pane fade " id="tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis-network.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div>@let vm = this.vm();@if (vm.shouldDisplayErrors) {  @for (errorWithDirective of vm.errorsToDisplay.errors; track $index) {    <div [class]="errorClasses">      <ng-container        *ngTemplateOutlet="          errorWithDirective.directive.templateRef;          context: {            $implicit: label(),            error: errorWithDirective.error          }        "      />    </div>  }  @for (error of vm.errorsToDisplay.fallbackErrors; track $index) {    <div [class]="errorClasses">      <ng-container        *ngTemplateOutlet="          vm.errorsToDisplay.fallback!.templateRef;          context: {            $implicit: label(),            type: error.kind,            error: error          }        "      />    </div>  }}</div>'
    var COMPONENTS = [{'name': 'ValidationErrorsComponent', 'selector': 'val-errors'},{'name': 'ValidationSignalErrorsComponent', 'selector': 'val-signal-errors'}];
    var DIRECTIVES = [{'name': 'DefaultValidationErrorsDirective', 'selector': 'val-default-errors'},{'name': 'ValidationErrorDirective', 'selector': 'ng-template[valError]'},{'name': 'ValidationFallbackDirective', 'selector': 'ng-template[valFallback]'}];
    var ACTUAL_COMPONENT = {'name': 'ValidationSignalErrorsComponent'};
</script>
<script src="../js/tree.js"></script>

















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'ValidationSignalErrorsComponent.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
