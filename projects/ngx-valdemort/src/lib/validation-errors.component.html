<ng-container *ngIf="vm() as vm">
  <ng-container *ngIf="vm.shouldDisplayErrors">
    <div [class]="errorClasses" *ngFor="let errorDirective of vm.errorsToDisplay.errors">
      <ng-container
        *ngTemplateOutlet="errorDirective!.templateRef; context: {
        $implicit: label,
        error: vm.control.errors![errorDirective.type]
      }"
      ></ng-container>
    </div>
    <div [class]="errorClasses" *ngFor="let error of vm.errorsToDisplay.fallbackErrors">
      <ng-container
        *ngTemplateOutlet="vm.errorsToDisplay.fallback!.templateRef; context: {
        $implicit: label,
        type: error.type,
        error: error.value
      }"
      ></ng-container>
    </div>
  </ng-container>
</ng-container>
