import{a as tn,b as on,c as an,d as ln,e as sn}from"./chunk-KPAQLKSZ.js";import{A as O,B as L,C as ie,D as dn,E as mn,F as _e,G as re,H as un,I as j,a as Bt,b as q,c as h,d as Ht,e as B,f as H,g as Ut,h as $t,i as zt,j as U,k as J,l as ee,m as te,n as Wt,o as Yt,p as ne,q as Xt,r as $,s as Zt,t as Qt,u as Jt,v as en,w as I,x as R,y as V,z as F}from"./chunk-7EQCUKTS.js";import{$ as y,$a as le,Db as r,Fb as k,Gb as he,Hb as Lt,Ib as jt,Jb as Gt,Ma as b,Nb as Te,Oa as Ft,Qa as g,Rb as be,Sb as ve,U as it,Vb as m,W as N,Wb as ye,Xa as Ot,Ya as ot,Yb as Kt,Za as at,_ as rt,_a as ae,a as nt,aa as _,ba as ge,eb as f,fb as a,gb as o,hb as d,ib as M,ja as Rt,jb as D,ka as Y,la as De,ma as K,mb as A,ob as v,oc as qt,pb as u,sa as Vt,tc as nn,uc as rn,wc as G,za as c,zb as S}from"./chunk-7VKAXBAG.js";import{a as et,b as tt}from"./chunk-Q7L6LLAK.js";function In(t,e){if(t&1&&r(0),t&2){let n=e.$implicit;k("",n||"This field"," is required")}}function Rn(t,e){if(t&1&&(r(0),be(1,"number")),t&2){let n=e.error,i=e.$implicit;he(" ",i||"This field"," must be at least ",ve(1,2,n.requiredLength)," characters long ")}}function Vn(t,e){if(t&1&&(r(0),be(1,"number")),t&2){let n=e.error,i=e.$implicit;he(" ",i||"This field"," must be at most ",ve(1,2,n.requiredLength)," characters long ")}}function Fn(t,e){if(t&1&&r(0),t&2){let n=e.$implicit;k("",n||"This field"," doesn't have the required format")}}function On(t,e){if(t&1&&r(0),t&2){let n=e.$implicit;k("",n||"This field"," must be a valid email address")}}function Ln(t,e){if(t&1&&(r(0),be(1,"number")),t&2){let n=e.error,i=e.$implicit;he(" ",i||"This field"," must be at least ",ve(1,2,n.min)," ")}}function jn(t,e){if(t&1&&(r(0),be(1,"number")),t&2){let n=e.error,i=e.$implicit;he("",i||"This field"," must be at most ",ve(1,2,n.max))}}var Pe=class t{constructor(){let e=N(_e);e.errorsClasses="invalid-feedback"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-validation-defaults"]],decls:8,vars:0,consts:[["valError","required"],["valError","minlength"],["valError","maxlength"],["valError","pattern"],["valError","email"],["valError","min"],["valError","max"]],template:function(n,i){n&1&&(a(0,"val-default-errors"),g(1,In,1,1,"ng-template",0)(2,Rn,2,4,"ng-template",1)(3,Vn,2,4,"ng-template",2)(4,Fn,1,1,"ng-template",3)(5,On,1,1,"ng-template",4)(6,Ln,2,4,"ng-template",5)(7,jn,2,4,"ng-template",6),o())},dependencies:[j,ie,dn,qt],encapsulation:2,changeDetection:0})};var Ae=class t{navbarCollapsed=Y(!0,{});toggleNavbar(){this.navbarCollapsed.update(e=>!e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-root"]],decls:30,vars:1,consts:[[1,"d-none"],["data-bs-theme","dark",1,"navbar","navbar-expand-md","bg-dark"],[1,"container-fluid"],[1,"navbar-brand","mb-0"],["routerLink","/",1,"navbar-brand","pt-0","pb-0"],[1,"d-none","d-sm-inline"],["type","button","aria-controls","navbarContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["id","navbarContent",1,"navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav","me-auto"],["ngbDropdown","",1,"nav-item"],["role","button","id","integration-menu","ngbDropdownToggle","",1,"nav-link"],["ngbDropdownMenu","","aria-labelledby","integration-menu",1,"dropdown-menu-dark"],["routerLink","/bootstrap",1,"dropdown-item"],["routerLink","/material",1,"dropdown-item"],[1,"nav-item"],["href","documentation/index.html",1,"nav-link"],["href","https://github.com/Ninja-Squad/ngx-valdemort",1,"nav-link"],["alt","","src","/github.png"],["role","main",1,"container","mt-5"]],template:function(n,i){n&1&&(d(0,"demo-validation-defaults",0),a(1,"header")(2,"nav",1)(3,"div",2)(4,"h1",3)(5,"a",4),r(6,"ngx-valdemort "),a(7,"small",5),r(8,"by Ninja Squad"),o()()(),a(9,"button",6),v("click",function(){return i.toggleNavbar()}),d(10,"span",7),o(),a(11,"div",8)(12,"ul",9)(13,"li",10)(14,"a",11),r(15," Integration "),o(),a(16,"div",12)(17,"a",13),r(18,"Bootstrap"),o(),a(19,"a",14),r(20,"Material"),o()()(),a(21,"li",15)(22,"a",16),r(23,"API documentation"),o()(),a(24,"li",15)(25,"a",17),d(26,"img",18),r(27," Github "),o()()()()()()(),a(28,"main",19),d(29,"router-outlet"),o()),n&2&&(c(11),f("ngbCollapse",i.navbarCollapsed()))},dependencies:[Pe,ln,Zt,en,Jt,Qt,an],styles:[".nav-link[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})};var ke=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-getting-started"]],decls:31,vars:0,consts:[["href","documentation/index.html"]],template:function(n,i){n&1&&(M(0,"ol")(1,"li"),r(2,"Import from "),M(3,"code"),r(4,"ngx-valdemort"),D(),r(5,";"),D(),M(6,"li"),r(7,"Add our standalone components and directives to your component imports;"),D(),M(8,"li"),r(9," Use "),M(10,"code"),r(11,"<val-errors>"),D(),r(12,", "),M(13,"code"),r(14,"<val-signal-errors>"),D(),r(15,", "),M(16,"code"),r(17,"<val-default-errors>"),D(),r(18," and "),M(19,"code"),r(20,"ValdemortConfig"),D(),r(21," as shown above; "),D(),M(22,"li"),r(23,"..."),D(),M(24,"li"),r(25,"Profit!"),D()(),M(26,"p"),r(27,"We also have an "),M(28,"a",0),r(29,"API documentation"),D(),r(30,"."),D())},encapsulation:2,changeDetection:0})};function Gn(t,e){if(t&1&&d(0,"demo-snippet",8),t&2){let n=u();f("code",n.ngModelSnippet)}}function Kn(t,e){if(t&1){let n=A();a(0,"div",9)(1,"form",10,1),v("ngSubmit",function(){y(n);let l=u();return _(l.submit())}),a(3,"div",11)(4,"label",12),r(5,"Email"),o(),a(6,"input",13,2),Gt("ngModelChange",function(l){y(n);let s=u();return jt(s.user.email,l)||(s.user.email=l),_(l)}),o(),d(8,"val-errors",14),o(),a(9,"button",15),r(10,"Submit"),o(),a(11,"button",16),v("click",function(){y(n);let l=S(2),s=u();return _(s.reset(l))}),r(12,"Reset"),o()()()}if(t&2){let n=S(7),i=u();c(6),Lt("ngModel",i.user.email),c(2),f("control",n.control)}}var Ie=class t{ngModelSnippet="ng-model.snippet.html";user={email:""};submit(){}reset(e){e.resetForm({email:""})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-ng-model"]],decls:11,vars:1,consts:[["nav","ngbNav"],["f","ngForm"],["emailCtrl","ngModel"],["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["lang","angular-html",3,"code"],[1,"demo"],[3,"ngSubmit"],[1,"mb-3"],["for","ng-model-email",1,"form-label"],["id","ng-model-email","type","email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],["label","The email",3,"control"],[1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,i){if(n&1&&(a(0,"ul",3,0)(2,"li",4)(3,"a",5),r(4,"Form component"),o(),g(5,Gn,1,1,"ng-template",6),o(),a(6,"li",4)(7,"a",5),r(8,"Demo"),o(),g(9,Kn,13,2,"ng-template",6),o()(),d(10,"div",7)),n&2){let l=S(1);c(10),f("ngbNavOutlet",l)}},dependencies:[F,V,R,O,I,G,$,U,q,B,H,Wt,Yt,Xt,zt,$t,j,re,L],encapsulation:2,changeDetection:0})};function qn(t,e){if(t&1&&d(0,"demo-snippet",7),t&2){let n=u();f("code",n.snippet)}}function Bn(t,e){if(t&1&&r(0),t&2){let n=e.error;k("You must be at least ",n.min," years old")}}function Hn(t,e){if(t&1){let n=A();a(0,"div",8)(1,"form",9,1),v("ngSubmit",function(){y(n);let l=u();return _(l.submit())}),a(3,"div",10)(4,"label",11),r(5,"Email"),o(),d(6,"input",12)(7,"val-errors",13),o(),a(8,"div",10)(9,"label",14),r(10,"Age"),o(),d(11,"input",15),a(12,"val-errors",16),g(13,Bn,1,1,"ng-template",17),o()(),a(14,"button",18),r(15,"Submit"),o(),a(16,"button",19),v("click",function(){y(n);let l=S(2),s=u();return _(s.reset(l))}),r(17,"Reset"),o()()()}if(t&2){let n=u();c(),f("formGroup",n.form)}}var Ve=class t{form=N(ne).group({email:["",[h.required,h.email]],age:[null,[h.required,h.min(18)]]});snippet="configuration.snippet.ts-like";constructor(){let e=N(_e);e.errorsClasses="text-warning",e.displayMode=mn.ONE,e.shouldDisplayErrors=n=>n.dirty}submit(){}reset(e){e.resetForm({email:"",age:null})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-configuration"]],features:[Te([_e])],decls:17,vars:1,consts:[["nav","ngbNav"],["f","ngForm"],["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["lang","angular-ts",3,"code"],[1,"demo"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","configuration-email",1,"form-label"],["id","configuration-email","formControlName","email","type","email",1,"form-control"],["controlName","email","label","The email"],["for","configuration-age",1,"form-label"],["id","configuration-age","formControlName","age","type","number",1,"form-control"],["controlName","age","label","The age"],["valError","min"],[1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,i){if(n&1&&(a(0,"p"),r(1,"The behavior of ngx-valdemort is configured via a configuration service. The same look and feel can thus be applied globally."),o(),a(2,"p"),r(3,` Instead of displaying errors when the control is touched or its form is submitted, the following example uses the service to specify that errors should be shown when the controls are dirty, to add a CSS class on errors to display them in orange rather than red, and to only display one error message per control instead of all of them.
`),o(),a(4,"p"),r(5,` Such a configuration is typically done only once, in the root component (or in a dedicated component inserted in the root component), to ensure that the same configuration applies everywhere.
`),o(),a(6,"ul",2,0)(8,"li",3)(9,"a",4),r(10,"App component"),o(),g(11,qn,1,1,"ng-template",5),o(),a(12,"li",3)(13,"a",4),r(14,"Demo"),o(),g(15,Hn,18,1,"ng-template",5),o()(),d(16,"div",6)),n&2){let l=S(7);c(16),f("ngbNavOutlet",l)}},dependencies:[F,V,R,O,I,G,$,U,q,J,B,H,te,ee,j,re,ie,L],encapsulation:2,changeDetection:0})};function Un(t,e){if(t&1&&d(0,"demo-snippet",7),t&2){let n=u();f("code",n.appSnippet)}}function $n(t,e){if(t&1&&d(0,"demo-snippet",7),t&2){let n=u();f("code",n.snippet)}}function zn(t,e){if(t&1&&r(0),t&2){let n=e.error;k("You must be at least ",n.min," years old")}}function Wn(t,e){if(t&1){let n=A();a(0,"div",8)(1,"form",9,1),v("ngSubmit",function(){y(n);let l=u();return _(l.submit())}),a(3,"div",10)(4,"label",11),r(5,"Email"),o(),d(6,"input",12)(7,"val-errors",13),o(),a(8,"div",10)(9,"label",14),r(10,"Age"),o(),d(11,"input",15),a(12,"val-errors",16),g(13,zn,1,1,"ng-template",17),o()(),a(14,"button",18),r(15,"Submit"),o(),a(16,"button",19),v("click",function(){y(n);let l=S(2),s=u();return _(s.reset(l))}),r(17,"Reset"),o()()()}if(t&2){let n=u();c(),f("formGroup",n.form)}}var Fe=class t{form=N(ne).group({email:["",[h.required,h.email]],age:[null,[h.required,h.min(18)]]});appSnippet="consistency.app.snippet.html";snippet="consistency.snippet.html";submit(){}reset(e){e.resetForm({email:"",age:null})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-consistency"]],decls:27,vars:1,consts:[["nav","ngbNav"],["f","ngForm"],["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["lang","angular-html",3,"code"],[1,"demo"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","consistency-email",1,"form-label"],["id","consistency-email","formControlName","email","type","email",1,"form-control"],["controlName","email","label","The email"],["for","consistency-age",1,"form-label"],["id","consistency-age","formControlName","age","type","number",1,"form-control"],["controlName","age"],["valError","min"],[1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,i){if(n&1&&(a(0,"p"),r(1,` By defining a default error message for each type of error once, and only once (typically in the root component), every form can become simpler.
`),o(),a(2,"ul",2,0)(4,"li",3)(5,"a",4),r(6,"App template"),o(),g(7,Un,1,1,"ng-template",5),o(),a(8,"li",3)(9,"a",4),r(10,"Template"),o(),g(11,$n,1,1,"ng-template",5),o(),a(12,"li",3)(13,"a",4),r(14,"Demo"),o(),g(15,Wn,18,1,"ng-template",5),o()(),d(16,"div",6),a(17,"p"),r(18," As you can see, you can choose to have very generic error messages ("),a(19,"em"),r(20,"This field is required"),o(),r(21,", as demonstrated on the age example) or, by just specifying the label on the "),a(22,"code"),r(23,"val-errors"),o(),r(24,` component, have specific, but consistent error messages. And if you really need to (like in the error for the minimum age), you can override the default message by the one you want.
`),o(),a(25,"p"),r(26,"By defining the messages in the templates, you can easily internationalize them, use pipes, or HTML formatting."),o()),n&2){let l=S(3);c(16),f("ngbNavOutlet",l)}},dependencies:[F,V,R,O,I,G,$,U,q,J,B,H,te,ee,j,re,ie,L],styles:["h3[_ngcontent-%COMP%]{font-size:1rem}"],changeDetection:0})};function Yn(t,e){if(t&1&&d(0,"demo-snippet",2),t&2){let n=u();f("code",n.snippet)}}function Xn(t,e){t&1&&r(0,"The email is required")}function Zn(t,e){t&1&&r(0,"The email must be a valid email address")}function Qn(t,e){t&1&&r(0,"The age is required")}function Jn(t,e){if(t&1&&r(0),t&2){let n=e.error;k("You must be at least ",n.min," years old")}}function ei(t,e){if(t&1){let n=A();a(0,"div",8)(1,"form",9,1),v("ngSubmit",function(){y(n);let l=u();return _(l.submit())}),a(3,"div",10)(4,"label",11),r(5,"Email"),o(),d(6,"input",12),a(7,"val-errors",13),g(8,Xn,1,0,"ng-template",14)(9,Zn,1,0,"ng-template",15),o()(),a(10,"div",10)(11,"label",16),r(12,"Age"),o(),d(13,"input",17),a(14,"val-errors",18),g(15,Qn,1,0,"ng-template",14)(16,Jn,1,1,"ng-template",19),o()(),a(17,"button",20),r(18,"Submit"),o(),a(19,"button",21),v("click",function(){y(n);let l=S(2),s=u();return _(s.reset(l))}),r(20,"Reset"),o()()()}if(t&2){let n=u();c(),f("formGroup",n.form)}}var Oe=class t{form=N(ne).group({email:["",[h.required,h.email]],age:[null,[h.required,h.min(18)]]});introSnippet="solution.intro.snippet.html";snippet="solution.snippet.html";submit(){}reset(e){e.resetForm({email:"",age:null})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-solution"]],decls:18,vars:2,consts:[["nav","ngbNav"],["f","ngForm"],["lang","angular-html",3,"code"],["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"demo"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","solution-email",1,"form-label"],["id","solution-email","formControlName","email","type","email",1,"form-control"],["controlName","email"],["valError","required"],["valError","email"],["for","solution-age",1,"form-label"],["id","solution-age","formControlName","age","type","number",1,"form-control"],["controlName","age"],["valError","min"],[1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,i){if(n&1&&(a(0,"p"),r(1,"Here is how you do the same using ngx-valdemort:"),o(),d(2,"demo-snippet",2),a(3,"p"),r(4,"And here is the same complete small form."),o(),a(5,"ul",3,0)(7,"li",4)(8,"a",5),r(9,"Template"),o(),g(10,Yn,1,1,"ng-template",6),o(),a(11,"li",4)(12,"a",5),r(13,"Demo"),o(),g(14,ei,21,1,"ng-template",6),o()(),d(15,"div",7),a(16,"p"),r(17,` This is already much better. The code is much easier to read and write, and the probability of introducing a bug is much smaller than before. But we can do better, and avoid repeating the same error messages over and over.
`),o()),n&2){let l=S(6);c(2),f("code",i.introSnippet),c(13),f("ngbNavOutlet",l)}},dependencies:[G,F,V,R,O,I,$,U,q,J,B,H,te,ee,j,re,ie,L],encapsulation:2,changeDetection:0})};function ti(t,e){if(t&1&&d(0,"demo-snippet",2),t&2){let n=u();f("code",n.snippet)}}function ni(t,e){t&1&&(a(0,"div"),r(1,"The email is required"),o())}function ii(t,e){t&1&&(a(0,"div"),r(1,"The email must be a valid email address"),o())}function ri(t,e){if(t&1&&(a(0,"div",13),ae(1,ni,2,0,"div"),ae(2,ii,2,0,"div"),o()),t&2){let n=u(2);c(),le(n.form.controls.email.hasError("required")?1:-1),c(),le(n.form.controls.email.hasError("email")?2:-1)}}function oi(t,e){t&1&&(a(0,"div"),r(1,"The age is required"),o())}function ai(t,e){if(t&1&&(a(0,"div"),r(1),o()),t&2){let n=u(3);c(),k("You must be at least ",n.form.controls.age.getError("min").min," years old")}}function li(t,e){if(t&1&&(a(0,"div",13),ae(1,oi,2,0,"div"),ae(2,ai,2,1,"div"),o()),t&2){let n=u(2);c(),le(n.form.controls.age.hasError("required")?1:-1),c(),le(n.form.controls.age.hasError("min")?2:-1)}}function si(t,e){if(t&1){let n=A();a(0,"div",8)(1,"form",9,1),v("ngSubmit",function(){y(n);let l=u();return _(l.submit())}),a(3,"div",10)(4,"label",11),r(5,"Email"),o(),d(6,"input",12),ae(7,ri,3,2,"div",13),o(),a(8,"div",10)(9,"label",14),r(10,"Age"),o(),d(11,"input",15),ae(12,li,3,2,"div",13),o(),a(13,"button",16),r(14,"Submit"),o(),a(15,"button",17),v("click",function(){y(n);let l=S(2),s=u();return _(s.reset(l))}),r(16,"Reset"),o()()()}if(t&2){let n=S(2),i=u();c(),f("formGroup",i.form),c(6),le(i.form.controls.email.invalid&&(n.submitted||i.form.controls.email.touched)?7:-1),c(5),le(i.form.controls.age.invalid&&(n.submitted||i.form.controls.age.touched)?12:-1)}}var Le=class t{form=N(ne).group({email:["",[h.required,h.email]],age:[null,[h.required,h.min(18)]]});introSnippet="problem.intro.snippet.html";snippet="problem.snippet.html";submit(){}reset(e){e.resetForm({email:"",age:null})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-problem"]],decls:20,vars:2,consts:[["nav","ngbNav"],["f","ngForm"],["lang","angular-html",3,"code"],["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"demo"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","problem-email",1,"form-label"],["id","problem-email","formControlName","email","type","email",1,"form-control"],[1,"invalid-feedback"],["for","problem-age",1,"form-label"],["id","problem-age","formControlName","age","type","number",1,"form-control"],[1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,i){if(n&1&&(a(0,"p"),r(1,"If you're using Angular forms, you have probably written code like this to display validation errors:"),o(),d(2,"demo-snippet",2),a(3,"p"),r(4,"Here is a complete small form using that kind of markup."),o(),a(5,"ul",3,0)(7,"li",4)(8,"a",5),r(9,"Template"),o(),g(10,ti,1,1,"ng-template",6),o(),a(11,"li",4)(12,"a",5),r(13,"Demo"),o(),g(14,si,17,3,"ng-template",6),o()(),d(15,"div",7),a(16,"p"),r(17,` That's a lot of code and duplications to display appropriate error messages, when the form is submitted or when the input field is touched. And this is only one form, with just two fields.
`),o(),a(18,"p"),r(19,` Sure, we could improve this by adding fields or getters in the component, but doing so for each and every form of the app is cumbersome, error-prone, and can lead to inconsistencies if every developer doesn't use the same technique.
`),o()),n&2){let l=S(6);c(2),f("code",i.introSnippet),c(13),f("ngbNavOutlet",l)}},dependencies:[G,F,V,R,O,I,$,U,q,J,B,H,te,ee,L],encapsulation:2,changeDetection:0})};function T(t){return Array.isArray(t)}function oe(t){return(typeof t=="object"||typeof t=="function")&&t!=null}function me(t,e,n,i){let l=t.structure.childrenMap();if(!l)return e;let s=e;for(let p of l.values()){if(i?.(s))break;s=n(p,s)}return s}function di(t){return!t}function cn(t){return t}function mi(t){return t.errors().length>0?"invalid":t.pending()?"unknown":"valid"}var st=class{node;constructor(e){this.node=e}rawSyncTreeErrors=m(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncTreeErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawSyncTreeErrors()??[]],{});syncErrors=m(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncErrors.compute(this.node.context),...this.syncTreeErrors(),...ui(this.node.submitState.serverErrors())],{});syncValid=m(()=>this.shouldSkipValidation()?!0:me(this.node,this.syncErrors().length===0,(e,n)=>n&&e.validationState.syncValid(),di),{});syncTreeErrors=m(()=>this.rawSyncTreeErrors().filter(e=>e.field===this.node.fieldProxy),{});rawAsyncErrors=m(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.asyncErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawAsyncErrors()??[]],{});asyncErrors=m(()=>this.shouldSkipValidation()?[]:this.rawAsyncErrors().filter(e=>e==="pending"||e.field===this.node.fieldProxy),{});errors=m(()=>[...this.syncErrors(),...this.asyncErrors().filter(e=>e!=="pending")],{});errorSummary=m(()=>me(this.node,this.errors(),(e,n)=>[...n,...e.errorSummary()]),{});pending=m(()=>me(this.node,this.asyncErrors().includes("pending"),(e,n)=>n||e.validationState.asyncErrors().includes("pending")),{});status=m(()=>{if(this.shouldSkipValidation())return"valid";let e=mi(this);return me(this.node,e,(n,i)=>i==="invalid"||n.validationState.status()==="invalid"?"invalid":i==="unknown"||n.validationState.status()==="unknown"?"unknown":"valid",n=>n==="invalid")},{});valid=m(()=>this.status()==="valid",{});invalid=m(()=>this.status()==="invalid",{});shouldSkipValidation=m(()=>this.node.hidden()||this.node.disabled()||this.node.readonly(),{})};function ui(t){return t===void 0?[]:T(t)?t:[t]}function Et(t,e){if(T(t))for(let n of t)n.field??=e;else t&&(t.field??=e);return t}var dt=0;function ci(){return dt}function Z(t,e){return(...n)=>{try{return dt=e,t(...n)}finally{dt=0}}}var se=Symbol(),Ue=Symbol(),Ee=class{predicates;fns=[];constructor(e){this.predicates=e}push(e){this.fns.push(pn(this.predicates,e))}mergeIn(e){let n=this.predicates?e.fns.map(i=>pn(this.predicates,i)):e.fns;this.fns.push(...n)}},Ge=class extends Ee{get defaultValue(){return!1}compute(e){return this.fns.some(n=>{let i=n(e);return i&&i!==Ue})}},ue=class t extends Ee{ignore;static ignoreNull(e){return new t(e,n=>n===null)}constructor(e,n){super(e),this.ignore=n}get defaultValue(){return[]}compute(e){return this.fns.reduce((n,i)=>{let l=i(e);return l===void 0||l===Ue?n:T(l)?[...n,...this.ignore?l.filter(s=>!this.ignore(s)):l]:this.ignore&&this.ignore(l)?n:[...n,l]},[])}},mt=class extends ue{constructor(e){super(e,void 0)}},ut=class extends Ee{key;get defaultValue(){return this.key.getInitial()}constructor(e,n){super(e),this.key=n}compute(e){if(this.fns.length===0)return this.key.getInitial();let n=this.key.getInitial();for(let i=0;i<this.fns.length;i++){let l=this.fns[i](e);l!==Ue&&(n=this.key.reduce(n,l))}return n}};function pn(t,e){return t.length===0?e:n=>{for(let i of t){let l=n.stateOf(i.path),s=K(l.structure.pathKeys).length-i.depth;for(let p=0;p<s;p++)l=l.structure.parent;if(!i.fn(l.context))return Ue}return e(n)}}var ce=class{predicates;hidden;disabledReasons;readonly;syncErrors;syncTreeErrors;asyncErrors;aggregateMetadataKeys=new Map;metadataFactories=new Map;constructor(e){this.predicates=e,this.hidden=new Ge(e),this.disabledReasons=new mt(e),this.readonly=new Ge(e),this.syncErrors=ue.ignoreNull(e),this.syncTreeErrors=ue.ignoreNull(e),this.asyncErrors=ue.ignoreNull(e)}hasAggregateMetadata(e){return this.aggregateMetadataKeys.has(e)}getAggregateMetadataEntries(){return this.aggregateMetadataKeys.entries()}getMetadataFactoryEntries(){return this.metadataFactories.entries()}getAggregateMetadata(e){return this.aggregateMetadataKeys.has(e)||this.aggregateMetadataKeys.set(e,new ut(this.predicates,e)),this.aggregateMetadataKeys.get(e)}addMetadataFactory(e,n){if(this.metadataFactories.has(e))throw new Error("Can't define value twice for the same MetadataKey");this.metadataFactories.set(e,n)}mergeIn(e){this.hidden.mergeIn(e.hidden),this.disabledReasons.mergeIn(e.disabledReasons),this.readonly.mergeIn(e.readonly),this.syncErrors.mergeIn(e.syncErrors),this.syncTreeErrors.mergeIn(e.syncTreeErrors),this.asyncErrors.mergeIn(e.asyncErrors);for(let[n,i]of e.getAggregateMetadataEntries())this.getAggregateMetadata(n).mergeIn(i);for(let[n,i]of e.getMetadataFactoryEntries())this.addMetadataFactory(n,i)}},Ke=class{depth;constructor(e){this.depth=e}build(){return new qe(this,[],0)}},pe=class t extends Ke{constructor(e){super(e)}current;all=[];addHiddenRule(e){this.getCurrent().addHiddenRule(e)}addDisabledReasonRule(e){this.getCurrent().addDisabledReasonRule(e)}addReadonlyRule(e){this.getCurrent().addReadonlyRule(e)}addSyncErrorRule(e){this.getCurrent().addSyncErrorRule(e)}addSyncTreeErrorRule(e){this.getCurrent().addSyncTreeErrorRule(e)}addAsyncErrorRule(e){this.getCurrent().addAsyncErrorRule(e)}addAggregateMetadataRule(e,n){this.getCurrent().addAggregateMetadataRule(e,n)}addMetadataFactory(e,n){this.getCurrent().addMetadataFactory(e,n)}getChild(e){if(e===se){let n=this.getCurrent().children;n.size>(n.has(se)?1:0)&&(this.current=void 0)}return this.getCurrent().getChild(e)}hasLogic(e){return this===e?!0:this.all.some(({builder:n})=>n.hasLogic(e))}mergeIn(e,n){n?this.all.push({builder:e,predicate:{fn:Z(n.fn,this.depth),path:n.path}}):this.all.push({builder:e}),this.current=void 0}getCurrent(){return this.current===void 0&&(this.current=new Ne(this.depth),this.all.push({builder:this.current})),this.current}static newRoot(){return new t(0)}},Ne=class extends Ke{logic=new ce([]);children=new Map;constructor(e){super(e)}addHiddenRule(e){this.logic.hidden.push(Z(e,this.depth))}addDisabledReasonRule(e){this.logic.disabledReasons.push(Z(e,this.depth))}addReadonlyRule(e){this.logic.readonly.push(Z(e,this.depth))}addSyncErrorRule(e){this.logic.syncErrors.push(Z(e,this.depth))}addSyncTreeErrorRule(e){this.logic.syncTreeErrors.push(Z(e,this.depth))}addAsyncErrorRule(e){this.logic.asyncErrors.push(Z(e,this.depth))}addAggregateMetadataRule(e,n){this.logic.getAggregateMetadata(e).push(Z(n,this.depth))}addMetadataFactory(e,n){this.logic.addMetadataFactory(e,Z(n,this.depth))}getChild(e){return this.children.has(e)||this.children.set(e,new pe(this.depth+1)),this.children.get(e)}hasLogic(e){return this===e}},qe=class t{builder;predicates;depth;logic;constructor(e,n,i){this.builder=e,this.predicates=n,this.depth=i,this.logic=e?pi(e,n,i):new ce([])}getChild(e){let n=this.builder?fn(this.builder,e):[];if(n.length===0)return new t(void 0,[],this.depth+1);if(n.length===1){let{builder:i,predicates:l}=n[0];return new t(i,[...this.predicates,...l.map(s=>pt(s,this.depth))],this.depth+1)}else{let i=n.map(({builder:l,predicates:s})=>new t(l,[...this.predicates,...s.map(p=>pt(p,this.depth))],this.depth+1));return new ct(i)}}hasLogic(e){return this.builder?.hasLogic(e)??!1}},ct=class t{all;logic;constructor(e){this.all=e,this.logic=new ce([]);for(let n of e)this.logic.mergeIn(n.logic)}getChild(e){return new t(this.all.flatMap(n=>n.getChild(e)))}hasLogic(e){return this.all.some(n=>n.hasLogic(e))}};function fn(t,e){if(t instanceof pe)return t.all.flatMap(({builder:n,predicate:i})=>{let l=fn(n,e);return i?l.map(({builder:s,predicates:p})=>({builder:s,predicates:[...p,i]})):l});if(t instanceof Ne)return[...e!==se&&t.children.has(se)?[{builder:t.getChild(se),predicates:[]}]:[],...t.children.has(e)?[{builder:t.getChild(e),predicates:[]}]:[]];throw new Error("Unknown LogicNodeBuilder type")}function pi(t,e,n){let i=new ce(e);if(t instanceof pe){let l=t.all.map(({builder:s,predicate:p})=>new qe(s,p?[...e,pt(p,n)]:e,n));for(let s of l)i.mergeIn(s.logic)}else if(t instanceof Ne)i.mergeIn(t.logic);else throw new Error("Unknown LogicNodeBuilder type");return i}function pt(t,e){return tt(et({},t),{depth:e})}var gn=Symbol("PATH"),W=class t{keys;parent;keyInParent;root;children=new Map;fieldPathProxy=new Proxy(this,fi);logicBuilder;constructor(e,n,i,l){this.keys=e,this.parent=i,this.keyInParent=l,this.root=n??this,i||(this.logicBuilder=pe.newRoot())}get builder(){return this.logicBuilder?this.logicBuilder:this.parent.builder.getChild(this.keyInParent)}getChild(e){return this.children.has(e)||this.children.set(e,new t([...this.keys,e],this.root,this,e)),this.children.get(e)}mergeIn(e,n){let i=e.compile();this.builder.mergeIn(i.builder,n)}static unwrapFieldPath(e){return e[gn]}static newRoot(){return new t([],void 0,void 0,void 0)}},fi={get(t,e){return e===gn?t:t.getChild(e).fieldPathProxy}},je,Ce=new Map,Be=class t{schemaFn;constructor(e){this.schemaFn=e}compile(){if(Ce.has(this))return Ce.get(this);let e=W.newRoot();Ce.set(this,e);let n=je;try{je=e,this.schemaFn(e.fieldPathProxy)}finally{je=n}return e}static create(e){return e instanceof t?e:new t(e)}static rootCompile(e){try{return Ce.clear(),e===void 0?W.newRoot():e instanceof t?e.compile():new t(e).compile()}finally{Ce.clear()}}};function gi(t){return t instanceof Be||typeof t=="function"}function $e(t){if(je!==W.unwrapFieldPath(t).root)throw new Error("A FieldPath can only be used directly within the Schema that owns it, **not** outside of it or within a sub-schema.")}var xe=class{brand;constructor(){}};function hn(){return new xe}var we=class{reduce;getInitial;brand;constructor(e,n){this.reduce=e,this.getInitial=n}};function fe(t,e){return new we(t,e)}function bn(){return fe((t,e)=>e===void 0?t:[...t,e],()=>[])}function Nt(){return fe((t,e)=>t===void 0?e:e===void 0?t:Math.min(t,e),()=>{})}function xt(){return fe((t,e)=>t===void 0?e:e===void 0?t:Math.max(t,e),()=>{})}function vn(){return fe((t,e)=>t||e,()=>!1)}var ze=vn(),yn=xt(),_n=Nt(),Sn=xt(),Cn=Nt(),En=bn(),ft=fe((t,e)=>e,()=>{}),gt=class{node;cache=new WeakMap;constructor(e){this.node=e}resolve(e){if(!this.cache.has(e)){let n=m(()=>{let i=W.unwrapFieldPath(e),l=this.node,s=ci();for(;s>0||!l.structure.logic.hasLogic(i.root.builder);)if(s--,l=l.structure.parent,l===void 0)throw new Error("Path is not part of this field tree.");for(let p of i.keys)if(l=l.structure.getChild(p),l===void 0)throw new Error(`Cannot resolve path .${i.keys.join(".")} relative to field ${["<root>",...this.node.structure.pathKeys()].join(".")}.`);return l.fieldProxy},{});this.cache.set(e,n)}return this.cache.get(e)()}get field(){return this.node.fieldProxy}get state(){return this.node}get value(){return this.node.structure.value}get key(){return this.node.structure.keyInParent}get pathKeys(){return this.node.structure.pathKeys}index=m(()=>{let e=this.key();if(!T(K(this.node.structure.parent.value)))throw new Error("RuntimeError: cannot access index, parent field is not an array");return Number(e)},{});fieldTreeOf=e=>this.resolve(e);stateOf=e=>this.resolve(e)();valueOf=e=>{let n=this.resolve(e)().value();if(n instanceof Ut)throw new Error("Tried to read an 'AbstractControl' value form a 'form()'. Did you mean to use 'compatForm()' instead?");return n}},ht=class{node;metadata=new Map;constructor(e){this.node=e,K(()=>rt(this.node.structure.injector,()=>{for(let[n,i]of this.node.logicNode.logic.getMetadataFactoryEntries())this.metadata.set(n,i(this.node.context))}))}get(e){if(e instanceof xe)return this.metadata.get(e);if(!this.metadata.has(e)){let n=this.node.logicNode.logic.getAggregateMetadata(e),i=m(()=>n.compute(this.node.context),{});this.metadata.set(e,i)}return this.metadata.get(e)}has(e){return e instanceof we?this.node.logicNode.logic.hasAggregateMetadata(e):this.metadata.has(e)}},hi={get(t,e,n){let i=t(),l=i.structure.getChild(e);if(l!==void 0)return l.fieldProxy;let s=K(i.value);if(T(s)){if(e==="length")return i.value().length;if(e===Symbol.iterator)return Array.prototype[e]}if(oe(s)&&e===Symbol.iterator)return function*(){for(let p in n)yield[p,n[p]]}},getOwnPropertyDescriptor(t,e){let n=K(t().value),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&!i.configurable&&(i.configurable=!0),i},ownKeys(t){let e=K(t().value);return typeof e=="object"&&e!==null?Reflect.ownKeys(e):[]}};function bi(t,e){let n=m(()=>t()[e()]);return n[nt]=t[nt],n.set=i=>{t.update(l=>vi(l,i,e()))},n.update=i=>{n.set(i(K(n)))},n.asReadonly=()=>n,n}function vi(t,e,n){if(T(t)){let i=[...t];return i[n]=e,i}else return tt(et({},t),{[n]:e})}var He=class{logic;identitySymbol=Symbol();_injector=void 0;get injector(){return this._injector??=ge.create({providers:[],parent:this.fieldManager.injector}),this._injector}constructor(e){this.logic=e}children(){return this.childrenMap()?.values()??[]}getChild(e){let n=this.childrenMap(),i=this.value();if(!(!n||!oe(i))){if(T(i)){let l=i[e];oe(l)&&l.hasOwnProperty(this.identitySymbol)&&(e=l[this.identitySymbol])}return n.get(typeof e=="number"?e.toString():e)}}destroy(){this.injector.destroy()}},bt=class extends He{node;fieldManager;value;get parent(){}get root(){return this.node}get pathKeys(){return yi}get keyInParent(){return _i}childrenMap;constructor(e,n,i,l,s,p,w){super(i),this.node=e,this.fieldManager=l,this.value=s,this.childrenMap=Nn(e,s,this.identitySymbol,n,i,p,w)}},vt=class extends He{parent;root;pathKeys;keyInParent;value;childrenMap;get fieldManager(){return this.root.structure.fieldManager}constructor(e,n,i,l,s,p,w,de){if(super(i),this.parent=l,this.root=this.parent.structure.root,this.pathKeys=m(()=>[...l.structure.pathKeys(),this.keyInParent()],{}),s===void 0){let C=p;this.keyInParent=m(()=>{if(l.structure.childrenMap()?.get(C)!==e)throw new Error(`RuntimeError: orphan field, looking for property '${C}' of ${lt(l)}`);return C},{})}else{let C=p;this.keyInParent=m(()=>{let Q=l.structure.value();if(!T(Q))throw new Error(`RuntimeError: orphan field, expected ${lt(l)} to be an array`);let x=Q[C];if(oe(x)&&x.hasOwnProperty(l.structure.identitySymbol)&&x[l.structure.identitySymbol]===s)return C;for(let E=0;E<Q.length;E++){let P=Q[E];if(oe(P)&&P.hasOwnProperty(l.structure.identitySymbol)&&P[l.structure.identitySymbol]===s)return C=E.toString()}throw new Error(`RuntimeError: orphan field, can't find element in array ${lt(l)}`)},{})}this.value=bi(this.parent.structure.value,this.keyInParent),this.childrenMap=Nn(e,this.value,this.identitySymbol,n,i,w,de),this.fieldManager.structures.add(this)}};var yi=m(()=>[],{}),_i=m(()=>{throw new Error("RuntimeError: the top-level field in the form has no parent")},{});function Nn(t,e,n,i,l,s,p){return ye({source:e,computation:(w,de)=>{let C=de?.value;if(!oe(w))return;let Q=T(w);if(C!==void 0){let x;if(Q){x=new Set(C.keys());for(let E=0;E<w.length;E++){let P=w[E];oe(P)&&P.hasOwnProperty(n)?x.delete(P[n]):x.delete(E.toString())}for(let E of x)C.delete(E)}else for(let E of C.keys())w.hasOwnProperty(E)||C.delete(E)}for(let x of Object.keys(w)){let E,P=w[x];if(P===void 0){C?.delete(x);continue}Q&&oe(P)&&!T(P)&&(E=P[n]??=Symbol(""));let It=E??x;if(C?.has(It))continue;let Qe,Je;Q?(Qe=i.getChild(se),Je=l.getChild(se)):(Qe=i.getChild(x),Je=l.getChild(x)),C??=new Map,C.set(It,p({kind:"child",parent:t,pathNode:Qe,logic:Je,initialKeyInParent:x,identityInParent:E,fieldAdapter:s}))}return C},equal:()=>!1})}function lt(t){return`<root>.${t.structure.pathKeys().join(".")}`}var yt=class{node;selfSubmitting=Y(!1,{});serverErrors;constructor(e){this.node=e,this.serverErrors=ye({source:this.node.structure.value,computation:()=>[]})}submitting=m(()=>this.selfSubmitting()||(this.node.structure.parent?.submitting()??!1),{})},Me=class t{structure;validationState;metadataState;nodeState;submitState;fieldAdapter;_context=void 0;get context(){return this._context??=new gt(this)}fieldProxy=new Proxy(()=>this,hi);constructor(e){this.fieldAdapter=e.fieldAdapter,this.structure=this.fieldAdapter.createStructure(this,e),this.validationState=this.fieldAdapter.createValidationState(this,e),this.nodeState=this.fieldAdapter.createNodeState(this,e),this.metadataState=new ht(this),this.submitState=new yt(this)}pendingSync=ye({source:()=>this.value(),computation:(e,n)=>{n?.value?.abort()}});get logicNode(){return this.structure.logic}get value(){return this.structure.value}_controlValue=ye(()=>this.value(),{});get controlValue(){return this._controlValue.asReadonly()}get keyInParent(){return this.structure.keyInParent}get errors(){return this.validationState.errors}get errorSummary(){return this.validationState.errorSummary}get pending(){return this.validationState.pending}get valid(){return this.validationState.valid}get invalid(){return this.validationState.invalid}get dirty(){return this.nodeState.dirty}get touched(){return this.nodeState.touched}get disabled(){return this.nodeState.disabled}get disabledReasons(){return this.nodeState.disabledReasons}get hidden(){return this.nodeState.hidden}get readonly(){return this.nodeState.readonly}get fieldBindings(){return this.nodeState.fieldBindings}get submitting(){return this.submitState.submitting}get name(){return this.nodeState.name}metadataOrUndefined(e){return this.hasMetadata(e)?this.metadata(e):void 0}get max(){return this.metadataOrUndefined(_n)}get maxLength(){return this.metadataOrUndefined(Cn)}get min(){return this.metadataOrUndefined(yn)}get minLength(){return this.metadataOrUndefined(Sn)}get pattern(){return this.metadataOrUndefined(En)??Si}get required(){return this.metadataOrUndefined(ze)??Ci}metadata(e){return this.metadataState.get(e)}hasMetadata(e){return this.metadataState.has(e)}markAsTouched(){this.nodeState.markAsTouched(),this.pendingSync()?.abort(),this.sync()}markAsDirty(){this.nodeState.markAsDirty()}reset(e){K(()=>this._reset(e))}_reset(e){e&&this.value.set(e),this.nodeState.markAsUntouched(),this.nodeState.markAsPristine();for(let n of this.structure.children())n._reset()}setControlValue(e){this._controlValue.set(e),this.markAsDirty(),this.debounceSync()}sync(){this.value.set(this.controlValue())}async debounceSync(){this.pendingSync()?.abort();let e=this.nodeState.debouncer();if(e){let n=new AbortController,i=e(n.signal);if(i&&(this.pendingSync.set(n),await i,n.signal.aborted))return}this.sync()}static newRoot(e,n,i,l){return l.newRoot(e,n,i,l)}static newChild(e){return e.fieldAdapter.newChild(e)}createStructure(e){return e.kind==="root"?new bt(this,e.pathNode,e.logic,e.fieldManager,e.value,e.fieldAdapter,t.newChild):new vt(this,e.pathNode,e.logic,e.parent,e.identityInParent,e.initialKeyInParent,e.fieldAdapter,t.newChild)}},Si=m(()=>[],{}),Ci=m(()=>!1,{}),_t=class{node;selfTouched=Y(!1,{});selfDirty=Y(!1,{});markAsTouched(){this.selfTouched.set(!0)}markAsDirty(){this.selfDirty.set(!0)}markAsPristine(){this.selfDirty.set(!1)}markAsUntouched(){this.selfTouched.set(!1)}fieldBindings=Y([],{});constructor(e){this.node=e}dirty=m(()=>{let e=this.selfDirty()&&!this.isNonInteractive();return me(this.node,e,(n,i)=>i||n.nodeState.dirty(),cn)},{});touched=m(()=>{let e=this.selfTouched()&&!this.isNonInteractive();return me(this.node,e,(n,i)=>i||n.nodeState.touched(),cn)},{});disabledReasons=m(()=>[...this.node.structure.parent?.nodeState.disabledReasons()??[],...this.node.logicNode.logic.disabledReasons.compute(this.node.context)],{});disabled=m(()=>!!this.disabledReasons().length,{});readonly=m(()=>(this.node.structure.parent?.nodeState.readonly()||this.node.logicNode.logic.readonly.compute(this.node.context))??!1,{});hidden=m(()=>(this.node.structure.parent?.nodeState.hidden()||this.node.logicNode.logic.hidden.compute(this.node.context))??!1,{});name=m(()=>{let e=this.node.structure.parent;return e?`${e.name()}.${this.node.structure.keyInParent()}`:this.node.structure.fieldManager.rootName},{});debouncer=m(()=>{if(this.node.logicNode.logic.hasAggregateMetadata(ft)){let n=this.node.logicNode.logic.getAggregateMetadata(ft).compute(this.node.context);if(n)return i=>n(this.node.context,i)}return this.node.structure.parent?.nodeState.debouncer?.()},{});isNonInteractive=m(()=>this.hidden()||this.disabled()||this.readonly(),{})},St=class{newRoot(e,n,i,l){return new Me({kind:"root",fieldManager:e,value:n,pathNode:i,logic:i.builder.build(),fieldAdapter:l})}newChild(e){return new Me(e)}createNodeState(e){return new _t(e)}createValidationState(e){return new st(e)}createStructure(e,n){return e.createStructure(n)}},Ct=class{injector;rootName;constructor(e,n){this.injector=e,this.rootName=n??`${this.injector.get(Vt)}.form${Ei++}`}structures=new Set;createFieldManagementEffect(e){De(()=>{let n=new Set;this.markStructuresLive(e,n);for(let i of this.structures)n.has(i)||(this.structures.delete(i),K(()=>i.destroy()))},{injector:this.injector})}markStructuresLive(e,n){n.add(e);for(let i of e.children())this.markStructuresLive(i.structure,n)}},Ei=0;function Ni(t){let e,n,i;return t.length===3?[e,n,i]=t:t.length===2?gi(t[1])?[e,n]=t:[e,i]=t:[e]=t,[e,n,i]}function wt(...t){let[e,n,i]=Ni(t),l=i?.injector??N(ge),s=rt(l,()=>Be.rootCompile(n)),p=new Ct(l,i?.name),w=i?.adapter??new St,de=Me.newRoot(p,e,s,w);return p.createFieldManagementEffect(de.structure),de.fieldProxy}async function Mt(t,e){let n=t();if(xn(n),!n.invalid()){n.submitState.selfSubmitting.set(!0);try{let i=await e(t);i&&xi(n,i)}finally{n.submitState.selfSubmitting.set(!1)}}}function xi(t,e){T(e)||(e=[e]);let n=new Map;for(let i of e){let l=Et(i,t.fieldProxy),s=l.field(),p=n.get(s);p||(p=[],n.set(s,p)),p.push(l)}for(let[i,l]of n)i.submitState.serverErrors.set(l)}function xn(t){t.markAsTouched();for(let e of t.structure.children())xn(e)}function wi(t){return new Tt(t)}function Mi(t){return new Pt(t)}function Di(t){return new Dt(t)}var Dt=class{__brand=void 0;kind="";field;message;constructor(e){e&&Object.assign(this,e)}},We=class{__brand=void 0;kind="";field;message;constructor(e){e&&Object.assign(this,e)}},Tt=class extends We{kind="required"};var Pt=class extends We{kind="email"};function Ye(t,e){return t instanceof Function?t(e):t}function Mn(t){return typeof t=="number"?isNaN(t):t===""||t===!1||t==null}function Ti(t){return typeof t=="object"&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function wn(t){return Ti(t)?Di(t):t}function Pi(t){return t==null?t:T(t)?t.map(wn):wn(t)}function Dn(t,e){$e(t),W.unwrapFieldPath(t).builder.addSyncErrorRule(i=>Pi(Et(e(i),i.field)))}function Ai(t,e,n){$e(t),W.unwrapFieldPath(t).builder.addAggregateMetadataRule(e,n)}function ki(t,...e){$e(t);let n,i;return e.length===2?[n,i]=e:[i]=e,n??=hn(),W.unwrapFieldPath(t).builder.addMetadataFactory(n,i),n}var Ii=new it("");var At=class{field;constructor(e){this.field=e}control=this;get value(){return this.field().value()}get valid(){return this.field().valid()}get invalid(){return this.field().invalid()}get pending(){return this.field().pending()}get disabled(){return this.field().disabled()}get enabled(){return!this.field().disabled()}get errors(){let e=this.field().errors();if(e.length===0)return null;let n={};for(let i of e)n[i.kind]=i;return n}get pristine(){return!this.field().dirty()}get dirty(){return this.field().dirty()}get touched(){return this.field().touched()}get untouched(){return!this.field().touched()}get status(){if(this.field().disabled())return"DISABLED";if(this.field().valid())return"VALID";if(this.field().invalid())return"INVALID";if(this.field().pending())return"PENDING";throw Error("AssertionError: unknown form control status")}valueAccessor=null;hasValidator(e){return e===h.required?this.field().metadata(ze)():!1}updateValueAndValidity(){}},Ri=new it(""),Tn=(()=>{class t{injector=N(ge);config=N(Ii,{optional:!0});classes=Object.entries(this.config?.classes??{}).map(([n,i])=>[n,m(()=>i(this.state()))]);field=Kt.required({});state=m(()=>this.field()(),{});[Ot]=void 0;controlValueAccessors=N(Bt,{optional:!0,self:!0});interopNgControl;get \u0275interopControl(){return this.controlValueAccessors?.[0]??this.interopNgControl?.valueAccessor??void 0}getOrCreateNgControl(){return this.interopNgControl??=new At(this.state)}\u0275register(){De(n=>{let i=this.state();i.nodeState.fieldBindings.update(l=>[...l,this]),n(()=>{i.nodeState.fieldBindings.update(l=>l.filter(s=>s!==this))})},{injector:this.injector})}static \u0275fac=function(i){return new(i||t)};static \u0275dir=Ft({type:t,selectors:[["","field",""]],inputs:{field:[1,"field"]},features:[Te([{provide:Ri,useExisting:t},{provide:Ht,useFactory:()=>N(t).getOrCreateNgControl()}])]})}return t})(),Vi=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Pn(t,e){Dn(t,n=>{if(!Mn(n.value())&&!Vi.test(n.value()))return e?.error?Ye(e.error,n):Mi({message:Ye(e?.message,n)})})}function kt(t,e){let n=ki(t,i=>m(()=>e?.when?e.when(i):!0));Ai(t,ze,({state:i})=>i.metadata(n)()),Dn(t,i=>{if(i.state.metadata(n)()&&Mn(i.value()))return e?.error?Ye(e.error,i):wi({message:Ye(e?.message,i)})})}function Fi(t,e){if(t&1&&d(0,"demo-snippet",8),t&2){let n=u();f("code",n.snippet)}}function Oi(t,e){if(t&1){let n=A();a(0,"div",9)(1,"form",10),v("submit",function(l){y(n);let s=u();return _(s.save(l))}),a(2,"div",11)(3,"label",12),r(4,"Name"),o(),a(5,"input",13),ot(),o(),d(6,"val-signal-errors",14),o(),a(7,"div",11)(8,"label",15),r(9,"Email"),o(),a(10,"input",16),ot(),o(),d(11,"val-signal-errors",17),o(),a(12,"button",18),r(13,"Save"),o(),a(14,"button",19),v("click",function(){y(n);let l=u();return _(l.reset())}),r(15,"Reset"),o()()()}if(t&2){let n=u();c(5),at(n.form.name),c(),f("forField",n.form.name),c(4),at(n.form.email),c(),f("forField",n.form.email)}}var Xe=class t{formValue=Y({name:"",email:""},{});form=wt(this.formValue,e=>{kt(e.name),kt(e.email),Pn(e.email)});snippet="signal-form.snippet.html";async save(e){e.preventDefault(),await Mt(this.form,async()=>{})}reset(){this.form().reset(),this.form().setControlValue({name:"",email:""})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-signal-form"]],decls:24,vars:1,consts:[["nav","ngbNav"],[1,"alert","alert-warning"],[1,"fa","fa-exclamation-triangle","me-2"],["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["lang","angular-html",3,"code"],[1,"demo"],["novalidate","",3,"submit"],[1,"mb-3"],["for","signal-form-name",1,"form-label"],["id","signal-form-name","type","email",1,"form-control",3,"field"],["label","The name",3,"forField"],["for","signal-form-email",1,"form-label"],["id","signal-form-email","type","email",1,"form-control",3,"field"],["label","The email",3,"forField"],[1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,i){if(n&1&&(a(0,"div",1),d(1,"i",2),r(2,`Signal forms still being experimental, our support for signal forms also is.
`),o(),a(3,"ul",3,0)(5,"li",4)(6,"a",5),r(7,"Template"),o(),g(8,Fi,1,1,"ng-template",6),o(),a(9,"li",4)(10,"a",5),r(11,"Demo"),o(),g(12,Oi,16,6,"ng-template",6),o()(),d(13,"div",7),a(14,"p"),r(15," Everything works the same way as in classic forms, except you must use "),a(16,"code"),r(17,'<val-signal-errors [forField]="..." />'),o(),r(18," instead of "),a(19,"code"),r(20,'<val-errors [control]="..." />'),o(),r(21,`.
`),o(),a(22,"p"),r(23,"Individual errors and default errors are defined with the same directives as for classic forms."),o()),n&2){let l=S(4);c(13),f("ngbNavOutlet",l)}},dependencies:[F,V,R,O,I,G,j,un,L,Tn],styles:["h3[_ngcontent-%COMP%]{font-size:1rem}"],changeDetection:0})};var Ze=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["demo-home"]],decls:101,vars:0,consts:[[1,"rounded-3","bg-light","p-5","mb-4","d-sm-flex"],[1,"logo"],["src","/logo.svg","alt","logo"],[1,"flex-fill"],[1,"lead"],[1,"visually-hidden"],[1,"bg-light","border","rounded","p-3"],[1,"row","mt-5"],[1,"col-md","feature-block"],[1,"text-center"],[1,"fa","fa-child"],[1,"fa","fa-cogs"],[1,"fa","fa-gavel"],[1,"row"],[1,"fa","fa-check"],[1,"fa","fa-heart"],["href","https://github.com/Ninja-Squad/ngx-valdemort"],[1,"mt-5"]],template:function(n,i){n&1&&(a(0,"div",0)(1,"div",1),d(2,"img",2),o(),a(3,"div",3)(4,"h2"),r(5," ngx\u2011valdemort "),a(6,"small"),r(7,"by\xA0Ninja\xA0Squad"),o()(),a(8,"p",4),r(9,"Simple, consistent validation error messages for your Angular forms."),o()()(),a(10,"h2"),r(11,"Tired of writing the same validation logic again, and again?"),o(),d(12,"demo-problem"),a(13,"h2"),r(14,"Our solution: ngx-valdemort"),o(),d(15,"demo-solution"),a(16,"h2"),r(17,"Consistent error messages? We've got you covered!"),o(),d(18,"demo-consistency"),a(19,"h2"),r(20,"Easily adapt ngx-valdemort to your preferences"),o(),d(21,"demo-configuration"),a(22,"h2"),r(23,"It works with "),a(24,"code"),r(25,"ngModel"),o(),r(26," too!"),o(),d(27,"demo-ng-model"),a(28,"h2"),r(29,"We also support signal forms"),o(),d(30,"demo-signal-form"),a(31,"h2",5),r(32,"Features"),o(),a(33,"div",6)(34,"div",7)(35,"div",8)(36,"div",9),d(37,"i",10),a(38,"h3"),r(39,"Easy to use"),o()(),a(40,"ul")(41,"li"),r(42,"Minimum markup needed"),o(),a(43,"li"),r(44,"Add "),a(45,"code"),r(46,"val-errors"),o(),r(47,", and you're set!"),o(),a(48,"li"),r(49,"Consistent, default error messages"),o()()(),a(50,"div",8)(51,"div",9),d(52,"i",11),a(53,"h3"),r(54,"Configurable"),o()(),a(55,"ul")(56,"li"),r(57,"Overriding of default messages for custom error messages"),o(),a(58,"li"),r(59,"Access to the error value (min, max, required length, etc.)"),o(),a(60,"li"),r(61,"Central configuration service"),o()()(),a(62,"div",8)(63,"div",9),d(64,"i",12),a(65,"h3"),r(66,"Customisable"),o()(),a(67,"ul")(68,"li"),r(69,"I18n possible"),o(),a(70,"li"),r(71,"HTML in messages possible"),o(),a(72,"li"),r(73,"Use of pipes in messages possible"),o(),a(74,"li"),r(75," A fallback message can be specified to handle forgotten errors or to display multiple error types the same way using i18n (see API documentation) "),o()()()(),a(76,"div",13)(77,"div",8)(78,"div",9),d(79,"i",14),a(80,"h3"),r(81,"Usable everywhere"),o()(),a(82,"ul")(83,"li"),r(84,"In reactive forms, template-driven forms, or standalone controls"),o(),a(85,"li"),r(86,"On controls nested in form groups or form arrays"),o()()(),a(87,"div",8)(88,"div",9),d(89,"i",15),a(90,"h4"),r(91,"Free, and open-source."),o()(),a(92,"ul")(93,"li"),r(94,"MIT license"),o(),a(95,"li")(96,"a",16),r(97,"The code is available on Github"),o()()()()()(),a(98,"h2",17),r(99,"You convinced me. How to get started?"),o(),d(100,"demo-getting-started"))},dependencies:[Le,Oe,Fe,Ve,Ie,ke,Xe],styles:['@charset "UTF-8";.logo[_ngcontent-%COMP%]{text-align:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:220px}@media(min-width:576px){.logo[_ngcontent-%COMP%]{text-align:left;margin-top:-40px}}.feature-block[_ngcontent-%COMP%]{padding:2rem}.feature-block[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{font-size:5rem;color:#212529bf}.feature-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.feature-block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin-left:0;padding-left:0}.feature-block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2713";padding-right:1ch}'],changeDetection:0})};var An=[{path:"",component:Ze},{path:"bootstrap",loadComponent:()=>import("./chunk-HB5IZKPP.js").then(t=>t.BootstrapComponent)},{path:"material",loadComponent:()=>import("./chunk-ZQH4VPDL.js").then(t=>t.MaterialComponent)}];var kn={providers:[Rt(),sn(An),nn(rn()),on()]};tn(Ae,kn).catch(t=>console.error(t));
